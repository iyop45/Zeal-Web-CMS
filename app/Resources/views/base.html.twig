<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>{{ title|default('Zeal') }} - TB</title>
        <meta name="description" content="{{ description|default() }}">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="http://cdn.intercoolerjs.org/intercooler-0.9.7.min.js"></script>
  
        {% stylesheets 
            'css/bootstrap-custom.css'
            filter='cssrewrite' %}
            <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}
        
        {% javascripts 
            'js/main.js' %}
            <script href="{{ asset_url }}"></script>
        {% endjavascripts %}

        {% block stylesheets %}{% endblock %}

        <!-- Alertify js -->
        <script src="//cdn.jsdelivr.net/alertifyjs/1.8.0/alertify.min.js"></script>
        <link rel="stylesheet" href="//cdn.jsdelivr.net/alertifyjs/1.8.0/css/alertify.min.css"/>
        <!-- Default theme -->
        <link rel="stylesheet" href="//cdn.jsdelivr.net/alertifyjs/1.8.0/css/themes/default.min.css"/>
        
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>

        <div id="body-container">
            <div id="banner-ribbon"></div>
            <div id="head-nav" class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-8 row-fluid">
                    <div id="head-nav-links" class="pull-left col-xs-8">

                        {% if activeTab is not defined %}
                            {% set activeTab = 'home' %}
                        {% endif %}    

                        <ul class="list-inline">
                            <li class="nav-link {% if activeTab == 'home' %}active{% endif %}">
                                <a href="{{ path('Homepage') }}">Home</a>
                            </li>
                            <li class="nav-link {% if activeTab == 'docs' %}active{% endif %}">
                                <a href="{{ path('DocumentationHome') }}">Documentation</a>
                            </li>

                            <!-- TEMPORARY FOR EASY ACCESS -->
                            <li class="nav-link">
                                <a href="http://127.0.0.1/phpmyadmin/sql.php">Database</a>
                            </li>

                            <li> | </li>
                            {% if app.session.get('isLoggedIn') %}
                                {{ include('default/widgets/social/user-nav.html.twig') }}
                            {% else %}
                                <li class="nav-link {% if activeTab == 'login' %}active{% endif %}">
                                    <a href="{{ path('LoginForm') }}">
                                        <span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
                                        Log In
                                    </a>
                                </li>
                                <li class="nav-link {% if activeTab == 'register' %}active{% endif %}">
                                    <a href="{{ path('RegisterForm') }}">Register</a>
                                </li>
                            {% endif %}
                        </ul>
                    </div>
                    <div id="search-box" class="col-xs-4 pull-right">
                        <form action="/search" method="GET">
                            <input class="form-control" placeholder="Search...">
                        </form>
                    </div>
                </div>
                <div class="col-xs-2">
                     {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                        {{ include('default/widgets/social/messenger.html.twig') }}
                     {% endif %}
                </div>
            </div>

            {% if app.session.flashbag.has('banner-notice') %}
                {% include('default/widgets/banner-message.html.twig') %}
            {% endif %}

            {% if app.session.flashbag.has('banner-error') %}
                {% include('default/widgets/banner-error.html.twig') %}
            {% endif %}

            <div id="banner" class="row-fluid">
                <div class="container">
                    <h1>{{ bannerTitle|default('This is the title') }}</h1>
                    <p>{{ bannerDescription|default('This is the description') }}</p>
                </div>
            </div>

            <div class="row row-space"></div>

            <div id="content-container" class="row">
                <div class="col-xs-2"></div>
                <div id="content" class="col-xs-8">
                    <p> User dump: </p>
                    {{ dump(app.session.get('User')) }}
                    {% if app.session.get('User').Roles is defined %}
                        <p> Role dump: </p>
                        {{ dump(app.session.get('User').Roles) }}
                    {% endif %}
                    {% block body %}{% endblock %}
                </div>
                <div class="col-xs-2"></div>
            </div>

            <div class="row row-space"></div>

            {{ include('default/footer.html.twig') }}

        </div>

        {% block javascripts %}{% endblock %}

    </body>
</html>
